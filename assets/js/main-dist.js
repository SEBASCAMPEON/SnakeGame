"use strict";!function(){class t{constructor(t,i){this.x=t,this.y=i,this.width=10,this.height=10,this.back=null}drawn(){s.fillRect(this.x,this.y,this.width,this.height),s.fillStyle="#ffffffe0",this.hasBack()&&this.back.drawn()}add(){if(this.hasBack())return this.back.add();this.back=new t(this.x,this.y)}hasBack(){return null!==this.back}copy(){this.hasBack()&&(this.back.copy(),this.back.x=this.x,this.back.y=this.y)}rightsquare(){this.copy(),this.x+=10}leftsquare(){this.copy(),this.x-=10}upsquare(){this.copy(),this.y-=10}downsquare(){this.copy(),this.y+=10}golpe(t,i=!1){return!(this===t&&!this.hasBack())&&(this===t?this.back.golpe(t,!0):!(i&&!this.hasBack())&&(i?this.back.golpe(t):this.hasBack()?y(this,t)||this.back.golpe(t):y(this,t)))}golpeBorder(){return this.x>590||this.x<0||this.y>290||this.y<0}}class i{static get(t,i){return Math.floor(Math.random()*i)+t}}class e{constructor(t,i){this.x=t,this.y=i,this.width=10,this.height=10}static generate(){return new e(i.get(0,500),i.get(0,300))}drawComida(){a.fillRect(this.x,this.y,this.width,this.height),a.fillStyle="#ffffffe0"}}const h=document.getElementById("canvascont"),s=h.getContext("2d"),a=h.getContext("2d"),d=new class{constructor(){this.head=new t(100,0),this.drawcuadrado(),this.direction="right",this.head.add(),this.head.add(),this.head.add()}drawcuadrado(){this.head.drawn()}right(){"left"!==this.direction&&(this.direction="right")}left(){"right"!==this.direction&&(this.direction="left")}up(){"down"!==this.direction&&(this.direction="up")}down(){"up"!==this.direction&&(this.direction="down")}move(){return"right"===this.direction?this.head.rightsquare():"left"===this.direction?this.head.leftsquare():"up"===this.direction?this.head.upsquare():"down"===this.direction?this.head.downsquare():void 0}eat(){r++,this.head.add(),o.setAttribute("value",r)}dead(){return this.head.golpe(this.head)||this.head.golpeBorder()}};let n=[],r=0,o=document.getElementById("puntajeinput"),c=document.querySelector(".buttonretry");window.addEventListener("keydown",(function(t){return t.preventDefault(),40===t.keyCode?d.down():38===t.keyCode?d.up():39===t.keyCode?d.right():37===t.keyCode?d.left():void 0}));const u=setInterval((function(){d.move(),s.clearRect(0,0,h.width,h.height),d.drawcuadrado(),function(){for(const t in n){const i=n[t];void 0!==i&&(i.drawComida(),f(i,d.head)&&(d.eat(),l(i)))}}(),d.dead()&&(console.log("Game over"),window.clearInterval(u),s.font="20pt Verdana",s.fillStyle="#0b8a02",s.fillText("GAME OVER",210,150),c.setAttribute("style","display:block"))}),100);function l(t){n=n.filter((function(i){return t!==i}))}function y(t,i){return t.x==i.x&&t.y==i.y}function f(t,i){var e=!1;return i.x+i.width>=t.x&&i.x<t.x+t.width&&i.y+i.height>=t.y&&i.y<t.y+t.height&&(e=!0),i.x<=t.x&&i.x+i.width>=t.x+t.width&&i.y<=t.y&&i.y+i.height>=t.y+t.height&&(e=!0),t.x<=i.x&&t.x+t.width>=i.x+i.width&&t.y<=i.y&&t.y+t.height>=i.y+i.height&&(e=!0),e}setInterval((function(){const t=e.generate();n.push(t),setTimeout((function(){l(t)}),1e4)}),4e3)}();